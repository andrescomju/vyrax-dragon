<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vyrax Token - El Token de la Comunidad</title>
  <style>
    /* ... (todo tu CSS intacto) ... */

    #wallet-connect {
      background-color: #ff6f00;
      color: #000;
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
    }
    #wallet-address {
      margin-top: 10px;
      font-size: 1rem;
      color: #ff9900;
    }
    #mint-info {
      margin-top: 20px;
      font-size: 1.1rem;
    }
    #mint-btn {
      background-color: #ff6f00;
      color: #000;
      padding: 10px 18px;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<header>
  <h1>Vyrax Token ($VYR) ‚Äì El Token de la Comunidad que Transforma el Futuro</h1>
  <p>üî• Token + NFTs en BNB Chain | 100% Comunidad</p>
  <button id="wallet-connect">üîó Conectar Wallet</button>
  <div id="wallet-address"></div>
</header>

<main>
  <!-- ... todo tu contenido intacto ... -->

  <div id="mint-info">
    <p><strong>üßÆ NFTs Minteados:</strong> <span id="minted">...</span> / 100</p>
    <button id="mint-btn">üé® Mint 1 NFT (0.15 BNB)</button>
    <p id="status-msg"></p>
  </div>

  <!-- ... el resto de tu contenido intacto ... -->
</main>

<footer>
  <p>¬© 2025 Vyrax Token - Todos los derechos reservados</p>
</footer>

<!-- üß† Web3 & Web3Modal scripts -->
<script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
<script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
<script src="https://unpkg.com/evm-chains/lib/index.min.js"></script>
<script src="https://unpkg.com/web3modal"></script>

<script>
  const contractAddress = "0x3010B4E5bA1BBCEA334f5ad0cb5153b434A0aC4E";
  const mintPriceBNB = "0.15";

  let web3;
  let account;
  let contract;
  let web3Modal;
  let provider;

  async function init() {
    const providerOptions = {
      walletconnect: {
        package: window.WalletConnectProvider.default,
        options: {
          rpc: {
            56: "https://bsc-dataseed1.binance.org/"
          },
        }
      }
    };

    web3Modal = new window.Web3Modal.default({
      cacheProvider: false,
      providerOptions
    });

    document.getElementById('wallet-connect').addEventListener('click', connectWallet);
    document.getElementById('mint-btn').addEventListener('click', mintNFT);

    fetchMintedCount();
  }

  async function connectWallet() {
    try {
      provider = await web3Modal.connect();
      web3 = new Web3(provider);

      const chainId = await web3.eth.getChainId();
      if (chainId !== 56) {
        alert("¬°Por favor cambia a BNB Chain!");
        return;
      }

      const accounts = await web3.eth.getAccounts();
      account = accounts[0];
      document.getElementById('wallet-address').textContent = üü¢ Conectado: ${account.slice(0,6)}...${account.slice(-4)};

      const abi = [
        {
          "constant": false,
          "inputs": [],
          "name": "mint",
          "outputs": [],
          "type": "function"
        },
        {
          "constant": true,
          "inputs": [],
          "name": "totalSupply",
          "outputs": [{"name":"","type":"uint256"}],
          "type": "function"
        }
      ];

      contract = new web3.eth.Contract(abi, contractAddress);

      fetchMintedCount();

    } catch (error) {
      console.error("Conexi√≥n fallida:", error);
    }
  }

  async function fetchMintedCount() {
    try {
      const rpcWeb3 = new Web3("https://bsc-dataseed1.binance.org/");
      const abi = [{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"type":"function"}];
      const readContract = new rpcWeb3.eth.Contract(abi, contractAddress);
      const total = await readContract.methods.totalSupply().call();
      document.getElementById("minted").textContent = total;
    } catch (e) {
      console.error("Error al obtener NFTs minteados", e);
    }
  }

  async function mintNFT() {
    if (!contract || !account) {
      alert("Conecta tu wallet primero.");
      return;
    }

    try {
      document.getElementById("status-msg").textContent = "‚è≥ Minting NFT...";
      await contract.methods.mint().send({
        from: account,
        value: web3.utils.toWei(mintPriceBNB, 'ether')
      });
      document.getElementById("status-msg").textContent = "‚úÖ NFT minteado con √©xito üéâ";
      fetchMintedCount();
    } catch (err) {
      console.error(err);
      document.getElementById("status-msg").textContent = "‚ùå Error al mintear el NFT.";
    }
  }

  window.addEventListener('load', init);
</script>

</body>
</html>